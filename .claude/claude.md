# Threads自動投稿プロジェクト - Claude Code セッションガイド

## 🚨 新しいセッションで最初にすべきこと

### 1. プロジェクト構造の理解

#### 重要ファイル
- `data/posts_schedule.csv`: すべての投稿マスターデータ（永久保存、削除しない）
- `manuscripts/`: 短編小説の原稿ディレクトリ（番号管理、投稿分割前の完成原稿）
- `manuscripts/README.md`: 小説制作のガイドライン
- `.github/workflows/`: GitHub Actions自動投稿設定

#### 実行スクリプト
- 各種Python スクリプト（投稿生成、分析、修正など）

### 2. 短編小説制作フロー（manuscripts/）

#### 📚 コンセプトとテーマ

このアカウントでは、**教室を舞台にした短編小説**を連載しています。

**視点と文体:**
- 一人称（教師視点）
- 叙述: 常体（だ・である調）
- 会話: 丁寧語（です・ます調）

**構成:**
- 朝 → 午前 → 昼 → 午後 → 夕方 → 夜 → 深夜 → 翌日 → あとがき（先生の声）
- 各章の段落末に余韻を残し、後で24投稿などへ分割しやすい構造

**中心テーマ:**
教室で起きる小さな出来事（物、音、制度など）を通じて、子どもの背景にある家庭事情や心の問題に向き合う教師の物語。

**重要な原則:**
- 完璧な解決を描かない（妥協点や限界を示す）
- 教師の葛藤、迷い、無力感を率直に描く
- 格差、虐待、孤立、貧困など社会問題に触れる
- 親を一方的に悪者にしない（親の事情も描く）
- 個人特定情報は避け、観察に根拠を添える

#### 既存作品（2025-11-08時点）

1. **001_suzuno_oto.md（鈴の音）** - ランドセルの鈴と母の不安、子どもの選択権
2. **002_ibasho_no_nai_ko.md（居場所のない子）** - 虐待疑惑と通告の決断
3. **003_sensei_no_seigi.md（先生の正義）** - 体罰問題と教師間の価値観の対立
4. **004_tesuto_no_tensu.md（テストの点数）** - 成績と親の期待
5. **005_sankanbi_no_kaidan.md（参観日の階段）** - 親が来られない子どもへの配慮
6. **006_keshigomu_no_uso.md（消しゴムの嘘）** - 盗みの背景にある貧困
7. **007_hyakuten_no_kodoku.md（百点の孤独）** - 優等生の孤立
8. **008_sedai_no_kabe.md（世代の壁）** - ベテラン教師との世代間ギャップ
9. **009_juken_no_noroi.md（受験の呪い）** - 受験プレッシャー
10. **010_kyushoku_no_nokori.md（給食の残り）** - 食事ネグレクトと子どもの飢え
11. **011_hakui_no_nioi.md（白衣の匂い）** - 医療従事者の親を持つ子の寂しさ

#### 新作を作る際のチェックリスト

新しい小説を作成する前に、以下を確認:

1. **既存作品のテーマと重複していないか？**
   - [manuscripts/README.md](manuscripts/README.md) で既存テーマを確認
   - 既存の001-010の作品を確認

2. **教室の具体的なモチーフがあるか？**
   - ✓ 良い例: 鈴の音、消しゴム、給食、参観日など具体的な「物」や「出来事」
   - ✗ 悪い例: 抽象的なテーマ（「心の問題」「いじめ」など具体性がない）

3. **社会問題が自然に織り込まれているか？**
   - 説教臭くならない
   - 教師視点での観察と葛藤を中心に

4. **時系列構成が守られているか？**
   - 朝 → 午前 → 昼 → 午後 → 夕方 → 夜 → 深夜 → 翌日 → あとがき

5. **ファイル命名規則:**
   - `0XX_テーマ_ローマ字.md`（例: 010_kyushoku_no_nokori.md）
   - 番号は連番で管理（日付に依存しない）

#### 新作小説の作成手順

```bash
# 1. 既存作品を確認
ls manuscripts/
cat manuscripts/README.md

# 2. 既存作品をいくつか読んでトーンを掴む
cat manuscripts/001_suzuno_oto.md
cat manuscripts/006_keshigomu_no_uso.md

# 3. 新しいテーマで執筆
# - 教室の具体的なモチーフから発想
# - 既存テーマと重複しないようチェック
# - 時系列構成を守る
# - 8000-9000文字程度
```

#### 投稿への分割（将来的な作業）

- 完成した小説を24投稿程度に分割
- 各章の余韻を活かして自然な分割点を設定
- Threads投稿フォーマットに変換
- `data/posts_schedule.csv` に追加

### 3. データ管理

#### posts_schedule.csv の構造
```csv
id,datetime,text,thread_text,status,category,subcategory,hashtags
001_01,2025-11-08 15:00,"投稿本文",,pending,教室短編,鈴の音,
```

**重要:** このファイルはすべての投稿の永久記録です。削除しないでください。

#### カテゴリ体系
- **教室短編**: 短編小説シリーズ
- subcategory: 各作品のタイトル（鈴の音、消しゴムの嘘、など）

### 4. よくある作業パターン

#### 新しい小説の投稿データを生成
1. `manuscripts/0XX_title.md` を作成
2. Pythonスクリプトで24投稿に分割
3. `data/posts_schedule.csv` に追加
4. Git commit & push

#### トラブルシューティング
```bash
# CSVファイルの確認
head data/posts_schedule.csv

# 最新の投稿を確認
tail -20 data/posts_schedule.csv

# 特定のカテゴリを検索
grep "教室短編" data/posts_schedule.csv
```

---

## 📝 更新履歴

### 2025-11-08（小説コンテンツへの移行）
- **コンテンツ戦略の大転換**: 教室短編小説シリーズへ完全移行
- `manuscripts/` ディレクトリ作成
- 10作品の短編小説を制作
- 投稿を小説の分割投稿に切り替え
- CLAUDE.md を簡潔化（古い情報を削除）

### 2025-10-31
- ステートレスアーキテクチャ実装
- `posts_schedule.csv` を単一の情報源に
- GitHub Actions による自動投稿
