# Threads自動投稿プロジェクト - Claude Code セッションガイド

## 🚨 新しいセッションで最初にすべきこと

### 1. learnings.md を必ず読む
**最重要:** このプロジェクトには仮説検証の学習ログ `learnings.md` があります。
新しいセッションを開始したら、**必ず最初に learnings.md を読んでください。**

理由:
- 過去の仮説とその成功/失敗パターンが記録されている
- 同じ失敗を繰り返さないための知見が蓄積されている
- 現在の投稿戦略（短文メタ60% + 厳選長文40%）の根拠が記載されている

```bash
# 必ず最初に実行
cat learnings.md
```

### 2. 現在の運用方針（2025-10-31時点）

#### 投稿戦略
- **短文メタ発言 60%**: 自己成長の過程を共有（最高パフォーマンス: 表示832回）
- **厳選長文 40%**: 具体的・実用的・ポジティブなトピックのみ

#### 削除されたトピック（仮説失敗）
以下のトピックは効果が低いため削除済み。今後追加しないこと:
- 占い系: タロット占い、数秘術、月星座
- 概念的: HSP、自己肯定感、完璧主義、ポジティブ思考
- 抽象的批判: 報連相、燃え尽き症候群、社会批判系

#### 成功トピック
- お金: NISA、貯金術、節約術など具体的アクション
- 恋愛: 元カレ、マッチングアプリなど具体的シーン
- 生活: ミニマル暮らしなどポジティブなライフスタイル

### 3. プロジェクト構造

#### 重要ファイル
- `posts_schedule.csv`: 予約投稿マスターデータ（git追跡）
- `threads.db`: 実行時DB（GitHub Actionsキャッシュ、.gitignore）
- `posted_history.csv`: 投稿履歴（重複防止用、git追跡）
- `learnings.md`: 仮説検証ログ（PDCA改善履歴）

#### ブランチ戦略
- `main`: 開発・新規投稿追加（手動）
- `automation`: 投稿履歴の自動更新（GitHub Actions）
- 毎日0時に automation → main を自動マージ

#### 実行スクリプト
- `threads_sqlite.py`: メイン投稿スクリプト
  - `post`: 投稿実行
  - `daily-report`: 毎朝の成果報告生成
  - `update-learnings`: 学習ログ更新

### 4. 日次レポートについて

毎朝のレポートフォーマット:
```
おはよう☀️
運用開始して{N}日目の成果報告！

【投稿数】X投稿
【いいね】X件（平均X.X）
【インプレッション】X,XXX回
【フォロワー】XX人（前日比+X人👆）

[モチベーションメッセージ]
```

運用開始日: 2025-10-29

### 5. トラブルシューティング

#### トークンエラーが出た場合
`.env` ファイルに重複エントリがないか確認:
```bash
grep THREADS_ACCESS_TOKEN .env
```

#### 投稿データの確認
```bash
# 現在のpending投稿数
sqlite3 threads.db "SELECT COUNT(*) FROM posts WHERE status='pending'"

# 昨日の投稿パフォーマンス
python3 threads_sqlite.py daily-report
```

### 6. 新しい投稿を追加する場合の注意

learnings.md の成功パターンに基づいて:
1. 具体的で実用的なトピックか？
2. ポジティブな内容か？
3. 専門用語や概念的すぎる内容ではないか？

を確認してから posts_schedule.csv に追加すること。

---

## 📝 更新履歴

### 2025-10-31
- learnings.md システムを構築
- 初回の仮説検証結果を記録（35投稿の分析）
- 低パフォーマンス12トピックを削除（63→51投稿）
